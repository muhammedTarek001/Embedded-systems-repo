

#include <avr/io.h>
#include"GPIO.h"
#include "STD_Types.h"
#include "Utils.h"
#include "Button.h"

unit8 Get_Button(unit8 button){
    unit8 value=0;
    unit8 pressedKey=0;
	switch(button){
       case BUTTON1:
           GPIO_InitPin(KEYPAD_PORT,ROW1_PIN, GPIO_INPUT);

           GPIO_InitPin(KEYPAD_PORT,COL1_PIN, GPIO_OUTPUT);
           GPIO_WritePin(KEYPAD_PORT, COL1_PIN, GPIO_HIGH);
           GPIO_InitPin(KEYPAD_PORT,COL2_PIN, GPIO_OUTPUT);
           GPIO_WritePin(KEYPAD_PORT, COL2_PIN, GPIO_LOW);
           GPIO_InitPin(KEYPAD_PORT,COL3_PIN, GPIO_OUTPUT);
           GPIO_WritePin(KEYPAD_PORT, COL3_PIN, GPIO_LOW);
           GPIO_InitPin(KEYPAD_PORT,COL4_PIN, GPIO_OUTPUT);
           GPIO_WritePin(KEYPAD_PORT, COL4_PIN, GPIO_LOW);

           value =GPIO_GetPin(KEYPAD_PORT, ROW1_PIN);
           if(value ==1){
           pressedKey=BUTTON1;
           }
    	   break;
       case BUTTON2:
                  GPIO_InitPin(KEYPAD_PORT,ROW1_PIN, GPIO_INPUT);

                  GPIO_InitPin(KEYPAD_PORT,COL1_PIN, GPIO_OUTPUT);
                  GPIO_WritePin(KEYPAD_PORT, COL1_PIN, GPIO_LOW);
                  GPIO_InitPin(KEYPAD_PORT,COL2_PIN, GPIO_OUTPUT);
                  GPIO_WritePin(KEYPAD_PORT, COL2_PIN, GPIO_HIGH);
                  GPIO_InitPin(KEYPAD_PORT,COL3_PIN, GPIO_OUTPUT);
                  GPIO_WritePin(KEYPAD_PORT, COL3_PIN, GPIO_LOW);
                  GPIO_InitPin(KEYPAD_PORT,COL4_PIN, GPIO_OUTPUT);
                  GPIO_WritePin(KEYPAD_PORT, COL4_PIN, GPIO_LOW);

                  value =GPIO_GetPin(KEYPAD_PORT, ROW1_PIN);

           	   break;
       case BUTTON3:
                  GPIO_InitPin(KEYPAD_PORT,ROW1_PIN, GPIO_INPUT);

                  GPIO_InitPin(KEYPAD_PORT,COL1_PIN, GPIO_OUTPUT);
                  GPIO_WritePin(KEYPAD_PORT, COL1_PIN, GPIO_LOW);
                  GPIO_InitPin(KEYPAD_PORT,COL2_PIN, GPIO_OUTPUT);
                  GPIO_WritePin(KEYPAD_PORT, COL2_PIN, GPIO_LOW);
                  GPIO_InitPin(KEYPAD_PORT,COL3_PIN, GPIO_OUTPUT);
                  GPIO_WritePin(KEYPAD_PORT, COL3_PIN, GPIO_HIGH);
                  GPIO_InitPin(KEYPAD_PORT,COL4_PIN, GPIO_OUTPUT);
                  GPIO_WritePin(KEYPAD_PORT, COL4_PIN, GPIO_LOW);

                  value =GPIO_GetPin(KEYPAD_PORT, ROW1_PIN);

           	   break;
       case BUTTON4:
                  GPIO_InitPin(KEYPAD_PORT,ROW1_PIN, GPIO_INPUT);

                  GPIO_InitPin(KEYPAD_PORT,COL1_PIN, GPIO_OUTPUT);
                  GPIO_WritePin(KEYPAD_PORT, COL1_PIN, GPIO_LOW);
                  GPIO_InitPin(KEYPAD_PORT,COL2_PIN, GPIO_OUTPUT);
                  GPIO_WritePin(KEYPAD_PORT, COL2_PIN, GPIO_LOW);
                  GPIO_InitPin(KEYPAD_PORT,COL3_PIN, GPIO_OUTPUT);
                  GPIO_WritePin(KEYPAD_PORT, COL3_PIN, GPIO_LOW);
                  GPIO_InitPin(KEYPAD_PORT,COL4_PIN, GPIO_OUTPUT);
                  GPIO_WritePin(KEYPAD_PORT, COL4_PIN, GPIO_HIGH);

                  value =GPIO_GetPin(KEYPAD_PORT, ROW1_PIN);

           	   break;
       case BUTTON5:
                  GPIO_InitPin(KEYPAD_PORT,ROW2_PIN, GPIO_INPUT);

                  GPIO_InitPin(KEYPAD_PORT,COL1_PIN, GPIO_OUTPUT);
                  GPIO_WritePin(KEYPAD_PORT, COL1_PIN, GPIO_HIGH);
                  GPIO_InitPin(KEYPAD_PORT,COL2_PIN, GPIO_OUTPUT);
                  GPIO_WritePin(KEYPAD_PORT, COL2_PIN, GPIO_LOW);
                  GPIO_InitPin(KEYPAD_PORT,COL3_PIN, GPIO_OUTPUT);
                  GPIO_WritePin(KEYPAD_PORT, COL3_PIN, GPIO_LOW);
                  GPIO_InitPin(KEYPAD_PORT,COL4_PIN, GPIO_OUTPUT);
                  GPIO_WritePin(KEYPAD_PORT, COL4_PIN, GPIO_LOW);

                  value =GPIO_GetPin(KEYPAD_PORT, ROW2_PIN);

           	   break;
       case BUTTON6:
                  GPIO_InitPin(KEYPAD_PORT,ROW2_PIN, GPIO_INPUT);

                  GPIO_InitPin(KEYPAD_PORT,COL1_PIN, GPIO_OUTPUT);
                  GPIO_WritePin(KEYPAD_PORT, COL1_PIN, GPIO_LOW);
                  GPIO_InitPin(KEYPAD_PORT,COL2_PIN, GPIO_OUTPUT);
                  GPIO_WritePin(KEYPAD_PORT, COL2_PIN, GPIO_HIGH);
                  GPIO_InitPin(KEYPAD_PORT,COL3_PIN, GPIO_OUTPUT);
                  GPIO_WritePin(KEYPAD_PORT, COL3_PIN, GPIO_LOW);
                  GPIO_InitPin(KEYPAD_PORT,COL4_PIN, GPIO_OUTPUT);
                  GPIO_WritePin(KEYPAD_PORT, COL4_PIN, GPIO_LOW);

                  value =GPIO_GetPin(KEYPAD_PORT, ROW2_PIN);

           	   break;
       case BUTTON7:
                        GPIO_InitPin(KEYPAD_PORT,ROW2_PIN, GPIO_INPUT);

                        GPIO_InitPin(KEYPAD_PORT,COL1_PIN, GPIO_OUTPUT);
                        GPIO_WritePin(KEYPAD_PORT, COL1_PIN, GPIO_LOW);
                        GPIO_InitPin(KEYPAD_PORT,COL2_PIN, GPIO_OUTPUT);
                        GPIO_WritePin(KEYPAD_PORT, COL2_PIN, GPIO_LOW);
                        GPIO_InitPin(KEYPAD_PORT,COL3_PIN, GPIO_OUTPUT);
                        GPIO_WritePin(KEYPAD_PORT, COL3_PIN, GPIO_HIGH);
                        GPIO_InitPin(KEYPAD_PORT,COL4_PIN, GPIO_OUTPUT);
                        GPIO_WritePin(KEYPAD_PORT, COL4_PIN, GPIO_LOW);

                        value =GPIO_GetPin(KEYPAD_PORT, ROW2_PIN);

                 	   break;
       case BUTTON8:
                        GPIO_InitPin(KEYPAD_PORT,ROW2_PIN, GPIO_INPUT);

                        GPIO_InitPin(KEYPAD_PORT,COL1_PIN, GPIO_OUTPUT);
                        GPIO_WritePin(KEYPAD_PORT, COL1_PIN, GPIO_LOW);
                        GPIO_InitPin(KEYPAD_PORT,COL2_PIN, GPIO_OUTPUT);
                        GPIO_WritePin(KEYPAD_PORT, COL2_PIN, GPIO_LOW);
                        GPIO_InitPin(KEYPAD_PORT,COL3_PIN, GPIO_OUTPUT);
                        GPIO_WritePin(KEYPAD_PORT, COL3_PIN, GPIO_LOW);
                        GPIO_InitPin(KEYPAD_PORT,COL4_PIN, GPIO_OUTPUT);
                        GPIO_WritePin(KEYPAD_PORT, COL4_PIN, GPIO_HIGH);

                        value =GPIO_GetPin(KEYPAD_PORT, ROW2_PIN);

                 	   break;
       case BUTTON9:
                         GPIO_InitPin(KEYPAD_PORT,ROW3_PIN, GPIO_INPUT);

                         GPIO_InitPin(KEYPAD_PORT,COL1_PIN, GPIO_OUTPUT);
                         GPIO_WritePin(KEYPAD_PORT, COL1_PIN, GPIO_HIGH);
                         GPIO_InitPin(KEYPAD_PORT,COL2_PIN, GPIO_OUTPUT);
                         GPIO_WritePin(KEYPAD_PORT, COL2_PIN, GPIO_LOW);
                         GPIO_InitPin(KEYPAD_PORT,COL3_PIN, GPIO_OUTPUT);
                         GPIO_WritePin(KEYPAD_PORT, COL3_PIN, GPIO_LOW);
                         GPIO_InitPin(KEYPAD_PORT,COL4_PIN, GPIO_OUTPUT);
                         GPIO_WritePin(KEYPAD_PORT, COL4_PIN, GPIO_LOW);

                         value =GPIO_GetPin(KEYPAD_PORT, ROW3_PIN);

                  	   break;
       case BUTTON10:
                                GPIO_InitPin(KEYPAD_PORT,ROW3_PIN, GPIO_INPUT);

                                GPIO_InitPin(KEYPAD_PORT,COL1_PIN, GPIO_OUTPUT);
                                GPIO_WritePin(KEYPAD_PORT, COL1_PIN, GPIO_LOW);
                                GPIO_InitPin(KEYPAD_PORT,COL2_PIN, GPIO_OUTPUT);
                                GPIO_WritePin(KEYPAD_PORT, COL2_PIN, GPIO_HIGH);
                                GPIO_InitPin(KEYPAD_PORT,COL3_PIN, GPIO_OUTPUT);
                                GPIO_WritePin(KEYPAD_PORT, COL3_PIN, GPIO_LOW);
                                GPIO_InitPin(KEYPAD_PORT,COL4_PIN, GPIO_OUTPUT);
                                GPIO_WritePin(KEYPAD_PORT, COL4_PIN, GPIO_LOW);

                                value =GPIO_GetPin(KEYPAD_PORT, ROW3_PIN);

                         	   break;
       case BUTTON11:
                                GPIO_InitPin(KEYPAD_PORT,ROW3_PIN, GPIO_INPUT);

                                GPIO_InitPin(KEYPAD_PORT,COL1_PIN, GPIO_OUTPUT);
                                GPIO_WritePin(KEYPAD_PORT, COL1_PIN, GPIO_LOW);
                                GPIO_InitPin(KEYPAD_PORT,COL2_PIN, GPIO_OUTPUT);
                                GPIO_WritePin(KEYPAD_PORT, COL2_PIN, GPIO_LOW);
                                GPIO_InitPin(KEYPAD_PORT,COL3_PIN, GPIO_OUTPUT);
                                GPIO_WritePin(KEYPAD_PORT, COL3_PIN, GPIO_HIGH);
                                GPIO_InitPin(KEYPAD_PORT,COL4_PIN, GPIO_OUTPUT);
                                GPIO_WritePin(KEYPAD_PORT, COL4_PIN, GPIO_LOW);

                                value =GPIO_GetPin(KEYPAD_PORT, ROW3_PIN);

                         	   break;
       case BUTTON12:
                                GPIO_InitPin(KEYPAD_PORT,ROW3_PIN, GPIO_INPUT);

                                GPIO_InitPin(KEYPAD_PORT,COL1_PIN, GPIO_OUTPUT);
                                GPIO_WritePin(KEYPAD_PORT, COL1_PIN, GPIO_LOW);
                                GPIO_InitPin(KEYPAD_PORT,COL2_PIN, GPIO_OUTPUT);
                                GPIO_WritePin(KEYPAD_PORT, COL2_PIN, GPIO_LOW);
                                GPIO_InitPin(KEYPAD_PORT,COL3_PIN, GPIO_OUTPUT);
                                GPIO_WritePin(KEYPAD_PORT, COL3_PIN, GPIO_LOW);
                                GPIO_InitPin(KEYPAD_PORT,COL4_PIN, GPIO_OUTPUT);
                                GPIO_WritePin(KEYPAD_PORT, COL4_PIN, GPIO_HIGH);

                                value =GPIO_GetPin(KEYPAD_PORT, ROW3_PIN);

                         	   break;
       case BUTTON13:
                                GPIO_InitPin(KEYPAD_PORT,ROW4_PIN, GPIO_INPUT);

                                GPIO_InitPin(KEYPAD_PORT,COL1_PIN, GPIO_OUTPUT);
                                GPIO_WritePin(KEYPAD_PORT, COL1_PIN, GPIO_HIGH);
                                GPIO_InitPin(KEYPAD_PORT,COL2_PIN, GPIO_OUTPUT);
                                GPIO_WritePin(KEYPAD_PORT, COL2_PIN, GPIO_LOW);
                                GPIO_InitPin(KEYPAD_PORT,COL3_PIN, GPIO_OUTPUT);
                                GPIO_WritePin(KEYPAD_PORT, COL3_PIN, GPIO_LOW);
                                GPIO_InitPin(KEYPAD_PORT,COL4_PIN, GPIO_OUTPUT);
                                GPIO_WritePin(KEYPAD_PORT, COL4_PIN, GPIO_LOW);

                                value =GPIO_GetPin(KEYPAD_PORT, ROW4_PIN);

                         	   break;
       case BUTTON14:
                                GPIO_InitPin(KEYPAD_PORT,ROW4_PIN, GPIO_INPUT);

                                GPIO_InitPin(KEYPAD_PORT,COL1_PIN, GPIO_OUTPUT);
                                GPIO_WritePin(KEYPAD_PORT, COL1_PIN, GPIO_LOW);
                                GPIO_InitPin(KEYPAD_PORT,COL2_PIN, GPIO_OUTPUT);
                                GPIO_WritePin(KEYPAD_PORT, COL2_PIN, GPIO_HIGH);
                                GPIO_InitPin(KEYPAD_PORT,COL3_PIN, GPIO_OUTPUT);
                                GPIO_WritePin(KEYPAD_PORT, COL3_PIN, GPIO_LOW);
                                GPIO_InitPin(KEYPAD_PORT,COL4_PIN, GPIO_OUTPUT);
                                GPIO_WritePin(KEYPAD_PORT, COL4_PIN, GPIO_LOW);

                                value =GPIO_GetPin(KEYPAD_PORT, ROW4_PIN);

                         	   break;
       case BUTTON15:
                                GPIO_InitPin(KEYPAD_PORT,ROW4_PIN, GPIO_INPUT);

                                GPIO_InitPin(KEYPAD_PORT,COL1_PIN, GPIO_OUTPUT);
                                GPIO_WritePin(KEYPAD_PORT, COL1_PIN, GPIO_LOW);
                                GPIO_InitPin(KEYPAD_PORT,COL2_PIN, GPIO_OUTPUT);
                                GPIO_WritePin(KEYPAD_PORT, COL2_PIN, GPIO_LOW);
                                GPIO_InitPin(KEYPAD_PORT,COL3_PIN, GPIO_OUTPUT);
                                GPIO_WritePin(KEYPAD_PORT, COL3_PIN, GPIO_HIGH);
                                GPIO_InitPin(KEYPAD_PORT,COL4_PIN, GPIO_OUTPUT);
                                GPIO_WritePin(KEYPAD_PORT, COL4_PIN, GPIO_LOW);

                                value =GPIO_GetPin(KEYPAD_PORT, ROW4_PIN);

                         	   break;
       case BUTTON16:
                                GPIO_InitPin(KEYPAD_PORT,ROW4_PIN, GPIO_INPUT);

                                GPIO_InitPin(KEYPAD_PORT,COL1_PIN, GPIO_OUTPUT);
                                GPIO_WritePin(KEYPAD_PORT, COL1_PIN, GPIO_LOW);
                                GPIO_InitPin(KEYPAD_PORT,COL2_PIN, GPIO_OUTPUT);
                                GPIO_WritePin(KEYPAD_PORT, COL2_PIN, GPIO_LOW);
                                GPIO_InitPin(KEYPAD_PORT,COL3_PIN, GPIO_OUTPUT);
                                GPIO_WritePin(KEYPAD_PORT, COL3_PIN, GPIO_LOW);
                                GPIO_InitPin(KEYPAD_PORT,COL4_PIN, GPIO_OUTPUT);
                                GPIO_WritePin(KEYPAD_PORT, COL4_PIN, GPIO_HIGH);

                                value =GPIO_GetPin(KEYPAD_PORT, ROW4_PIN);

                         	   break;



    }
	return value;
}
